<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="binnaryCalculator.css"/>
    <title>Binnary Calculator</title>
</head>
<body>
    <div>
        <div id="res">

        </div>
        <div id="btns">
            <button id="btn0">0</button>
            <button id="btn1">1</button>
            <button id="btnClr">C</button>
            <button id="btnEql">=</button>
            <button id="btnSum">+</button>
            <button id="btnSub">-</button>
            <button id="btnMul">*</button>
            <button id="btnDiv">/</button>
        </div>
    </div>
    <script>
        const res = document.getElementById("res");
        const btn0 = document.getElementById("btn0");
        const btn1 = document.getElementById("btn1");
        const btnClr = document.getElementById("btnClr");
        const btnEql = document.getElementById("btnEql");
        const btnSum = document.getElementById("btnSum");
        const btnSub = document.getElementById("btnSub");
        const btnMul = document.getElementById("btnMul");
        const btnDiv = document.getElementById("btnDiv");

        // finding shortcurt way 
    //    const allVariable = [btn0, btn1, btnEql, btnSum, btnSub, btnMul, btnDiv];
    //    let resultAllValue = ""; 
    //    for(let i=0; i<allVariable.length; i++){
    //     allVariable[i].addEventListener("click", handleAllVariable(i));
    //    }

        btn0.addEventListener("click", handleBtn0);
        btn1.addEventListener("click", handleBtn1);
        btnEql.addEventListener("click", handleBtnEql);
        btnSum.addEventListener("click", handleSum);
        btnSub.addEventListener("click", handleSub);
        btnMul.addEventListener("click", handleMul);
        btnDiv.addEventListener("click", handleDiv);
        btnClr.addEventListener("click", handleBtnClr);

        // function handleAllVariable(i){
        //     resultAllValue = resultAllValue + allVariable[i].innerText;
        //     res.innerText = resultAllValue;
        // }

        let resultAllValue = "";
        
        function handleBtn0(){
            resultAllValue = resultAllValue + btn0.innerText;
            res.innerText = resultAllValue;
            // console.log(resultAllValue);
        }

        function handleBtn1(){
            resultAllValue = resultAllValue + btn1.innerText;
            res.innerText = resultAllValue;
            // console.log(resultAllValue)
        }

        function handleSum(){
            resultAllValue = resultAllValue + btnSum.innerText;
            res.innerText = resultAllValue;
        }
        function handleSub(){
            resultAllValue = resultAllValue + btnSub.innerText;
            res.innerText = resultAllValue;
        }
        function handleMul(){
            resultAllValue = resultAllValue + btnMul.innerText;
            res.innerText = resultAllValue;
        }
        function handleDiv(){
            resultAllValue = resultAllValue + btnDiv.innerText;
            res.innerText = resultAllValue;
        }

        function handleBtnClr(){
            resultAllValue = "";
            res.innerText = resultAllValue;
        }

        function handleBtnEql(){
            // console.log(resultAllValue)
            const operators = ["+", "-", "*", "/"];
            for(let i=0; i<operators.length; i++){
                if(resultAllValue.indexOf(operators[i]) !== -1){
                    // console.log(operators[i] + " " + typeof(operators[i]));
                    const resultFirstValue = resultAllValue.slice(0, resultAllValue.indexOf(operators[i]));
                    const resultSecondValue = resultAllValue.slice(resultAllValue.indexOf(operators[i])+1, resultAllValue.length);
                    // convert Binary to decimal
                    const firstValueBin2Dec = parseInt(resultFirstValue, 2);
                    const secondValueBin2Dec = parseInt(resultSecondValue, 2);
                    console.log(resultFirstValue + " " + firstValueBin2Dec);
                    console.log(resultSecondValue + " " + secondValueBin2Dec);
                    let calculatedValue;
                    if(resultAllValue.indexOf("+") !== -1){
                        calculatedValue = firstValueBin2Dec + secondValueBin2Dec;
                    }else if(resultAllValue.indexOf("-") !== -1){
                        calculatedValue = firstValueBin2Dec - secondValueBin2Dec;
                    }else if(resultAllValue.indexOf("*") !== -1){
                        calculatedValue = firstValueBin2Dec * secondValueBin2Dec;
                    }else if(resultAllValue.indexOf("/") !== -1){
                        calculatedValue = firstValueBin2Dec / secondValueBin2Dec;
                    }
                    
                    res.innerText = calculatedValue.toString(2);
                }
                
            } 
            // console.log(resultAllValue);
        }

    </script>
</body>
</html>